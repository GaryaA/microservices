# Summary: Section 3 - How do we Right Size our Microservices & Identify Boundaries

## Обзор секции

В третьей секции курса изучались методы определения правильных границ микросервисов и их размеров. Были рассмотрены различные подходы и техники для идентификации границ сервисов и принятия решений о том, что должно быть отдельным микросервисом.

## Что было изучено

### 1. Проблема определения границ
- Как правильно разделить монолит на микросервисы
- Определение размера микросервиса
- Баланс между слишком маленькими и слишком большими сервисами
- Избежание "distributed monolith"

### 2. Domain-Driven Design (DDD)
- Использование DDD для определения границ
- **Bounded Context** - границы доменных моделей
- Каждый Bounded Context может быть микросервисом
- Избежание общих моделей между контекстами

### 3. Event Storming
- Техника для определения границ сервисов
- Идентификация бизнес-событий
- Группировка событий по доменам
- Визуализация потока событий

### 4. Критерии для разделения
- **Business Capability** - бизнес-функции
- **Data Ownership** - владение данными
- **Team Structure** - структура команд
- **Technology** - технологические требования
- **Scalability** - требования к масштабированию

### 5. Размер микросервиса
- **Слишком маленький** (Nano-services):
  - Избыточная сложность
  - Много сетевых вызовов
  - Сложность управления
- **Слишком большой** (Mini-monolith):
  - Потеря преимуществ микросервисов
  - Сложность масштабирования
  - Тесная связанность
- **Правильный размер**:
  - Одна бизнес-функция
  - Независимое развертывание
  - Команда может поддерживать

### 6. Принципы разделения
- **High Cohesion** - высокая связанность внутри сервиса
- **Low Coupling** - низкая связанность между сервисами
- **Single Responsibility** - одна ответственность
- **Autonomous** - автономность сервиса

### 7. Анти-паттерны
- **Shared Database** - общая база данных
- **Distributed Monolith** - микросервисы, которые слишком связаны
- **God Service** - сервис, который делает слишком много
- **Chatty Services** - слишком много межсервисных вызовов

### 8. Техники идентификации
- Анализ транзакций
- Анализ данных
- Анализ команд
- Анализ изменений
- Анализ масштабирования

## Ключевые концепции

### Business Capability Mapping
- Идентификация бизнес-возможностей
- Каждая возможность может быть сервисом
- Примеры: Customer Management, Order Processing, Payment

### Data Ownership
- Каждый сервис владеет своими данными
- Нет прямого доступа к данным другого сервиса
- Коммуникация только через API

### Team Structure
- Conway's Law - архитектура отражает структуру организации
- Размер команды влияет на размер сервиса
- "Two Pizza Team" - команда должна помещаться за двумя пиццами

## Практические подходы

### Стратегия миграции
1. **Strangler Fig Pattern** - постепенная замена монолита
2. **Database First** - начать с разделения данных
3. **API First** - начать с API границ
4. **Event First** - начать с событий

### Рефакторинг монолита
- Идентификация модулей
- Определение границ
- Постепенное выделение сервисов
- Тестирование на каждом этапе

## Результаты секции

После завершения третьей секции студенты:
1. Понимают важность правильного определения границ
2. Знают техники для идентификации границ (DDD, Event Storming)
3. Понимают критерии для разделения на микросервисы
4. Знают, как определить правильный размер сервиса
5. Понимают анти-паттерны и как их избежать
6. Готовы применять эти знания на практике

## Следующие шаги

В следующих секциях курса будут изучены:
- Контейнеризация с Docker (Section 4)
- Cloud Native принципы (Section 5)
- Управление конфигурациями (Section 6)
- Использование production баз данных (Section 7)

